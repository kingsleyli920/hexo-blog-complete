---
title: es6çš„ä¸€äº›çŸ¥è¯†ç‚¹æ•´ç†5
date: 2020-02-26 23:29:47
tags:
 - JavaScript
 - ECMAScript 6
 - å‰ç«¯å¼€å‘
 - Webå¼€å‘
comments: true
categories: å‰ç«¯å¼€å‘
img: https://blog-imgs-1253907084.cos.ap-beijing.myqcloud.com/blog-cover-imgs/frontend-js-article1.jpeg
---
<center> <h1>es6çš„ä¸€äº›çŸ¥è¯†ç‚¹æ•´ç†5</h1> </center>
<center> <h2> <font color = lightgray>åŸºç¡€éƒ¨åˆ†</font> </h2> </center>

## å‰è¨€

ä»Šå¤©å‡†å¤‡è¯´ä¸‹ES6çš„æ–°å¢çš„åŠŸèƒ½ - ç®­å¤´å‡½æ•°ã€‚å…¶å®ç®­å¤´å‡½æ•°åœ¨å¾ˆå¤šå…¶å®ƒè¯­è¨€ä¸­å·²ç»å­˜åœ¨äº†ï¼Œæ¯”å¦‚Javaã€‚ç®­å¤´å‡½æ•°æ˜¯åŒ¿åçš„ï¼Œè€Œä¸”ç®­å¤´å‡½æ•°çš„å­˜åœ¨ï¼Œçœå´äº†å¾ˆå¤šå¸¸ç”¨çš„æ“ä½œã€‚ç®€åŒ–äº†ä»£ç ï¼Œä½†æ˜¯åœ¨è¯´ç®­å¤´å‡½æ•°ä¹‹å‰ï¼Œæˆ‘å‡†å¤‡å…ˆè¯´ä¸‹functionå‘½åçš„å‡½æ•°ã€‚

## å‡½æ•°

æ™®é€šå‡½æ•°è‡ªç„¶æ˜¯åœ¨ES5ç‰ˆæœ¬å°±å·²ç»å­˜åœ¨äº†ï¼Œç›¸æ¯”äºç®­å¤´å‡½æ•°ï¼Œæ™®é€šå‡½æ•°çš„å…¼å®¹æ€§è‡ªç„¶å¥½å¾ˆå¤šï¼Œä¸‹é¢æ˜¯æ™®é€šå‡½æ•°çš„å®šä¹‰ï¼š

    function func() {
        console.log("func");
    }

    let func2 = function() {
        console.log("func2");
    }

    func();
    func2();

ç»“æœæ˜¯ï¼›

    func
    func2

æ˜¾è€Œæ˜“è§ï¼Œå‡½æ•°æ˜¯æœ‰ä¸¤ç§å®šä¹‰æ–¹å¼çš„ï¼Œä¸€ç§æ˜¯å¸¸è§„çš„æ–¹å¼ï¼Œfunctionå…³é”®å­—åè·Ÿç€å‡½æ•°åï¼Œä¹‹åæ˜¯å‚æ•°åˆ—è¡¨ï¼Œç„¶åæ˜¯æ˜¯å‡½æ•°ä½“ã€‚ç¬¬äºŒç§æ˜¯è¡¨è¾¾å¼æ–¹å¼ï¼Œå°±æ˜¯å‡½æ•°ååœ¨ç­‰å·å·¦è¾¹ï¼Œå‡½æ•°å®šä¹‰åœ¨ç­‰å·å³è¾¹ã€‚æ™®é€šå‡½æ•°ä¼šç»‘å®šthisï¼Œargumentsç­‰å…³é”®å­—ï¼Œæ¯”å¦‚ä¸‹æ–¹çš„ä¾‹å­ï¼š

    function a(a) {
         console.log("this: ", this, "\n arguments: ", arguments);
    }

    a(1,2,3,4);

ç»“æœæ˜¯ï¼š

    this:  WindowÂ {parent: Window, opener: null, top: Window, length: 0, frames: Window,Â â€¦} 
    arguments:  Arguments(4)Â [1, 2, 3, 4, callee: Æ’, Symbol(Symbol.iterator): Æ’]

æ™®é€šå‡½æ•°çš„thisæŒ‡å‘çš„æ˜¯è°ƒç”¨ä»–çš„å¯¹è±¡ï¼Œå¦‚ä¸Šè¿°ä»£ç ï¼Œæ˜¯ç›´æ¥å†™åœ¨scriptæ ‡ç­¾å†…çš„ï¼Œæ˜¯å…¨å±€è°ƒç”¨çš„ï¼Œå› æ­¤è°ƒç”¨ä»–çš„æ—¶å€™ï¼Œthiså¯¹åº”çš„æ˜¯windowã€‚å½“ç„¶è¿™æ˜¯éä¸¥æ ¼æ¨¡å¼ä¸‹çš„ï¼Œå¦‚æœæ˜¯å®šä¹‰ä¸ºä¸¥æ ¼æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯åœ¨ä»£ç å‰åŠ å…¥"use strict"ï¼Œè¿™ä¸ªthisä¼šæŒ‡å‘undefinedã€‚ä¸‹é¢ä¾‹å­èƒ½è®©æˆ‘ä»¬ç†è§£æ›´æ¸…æ™°ï¼š

    let obj = {
        name: "name1",
        func: function() {
            console.log(this.name);
        }
    }

    obj.func();

ç»“æœæ˜¯ï¼š

    name1

æ˜¾è€Œæ˜“è§äº†ï¼Œfuncå‡½æ•°æ˜¯objè°ƒç”¨çš„ã€‚æ€»ä¹‹åªè¦è®°ä½ï¼Œæ™®é€šå‡½æ•°çš„thisæŒ‡å‘å…¶è°ƒç”¨å¯¹è±¡ï¼Œä¸ç®¡ä»–æ˜¯å‡½æ•°ï¼Œå¯¹è±¡è¿˜æ˜¯é»˜è®¤çš„windowï¼Œå°±è¶³å¤Ÿäº†ã€‚æ¥ç€è¯´ä¸‹argumentsï¼Œä»ä¹‹å‰çš„ä»£ç ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ï¼Œargumentsæ˜¯æ™®é€šå‡½æ•°ç»‘å®šçš„å…³é”®å­—ï¼Œç±»ä¼¼äºthisï¼Œä½ ä¸éœ€è¦è‡ªå·±å®šä¹‰ã€‚argumentså¯¹åº”çš„æ˜¯ä¼ å…¥çš„æ‰€æœ‰å‚æ•°ã€‚å½“ç„¶ï¼Œæ™®é€šå‡½æ•°è¿˜ç»‘å®šsuperï¼ŒæŒ‡å‘å…¶çˆ¶ç±»ï¼Œè¿™æ¶‰åŠåˆ°é¢å‘å¯¹è±¡çš„çŸ¥è¯†ï¼Œä¹‹åæˆ‘ä¼šå†™ä¸“é¢˜ã€‚è‡³äºä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™æ™®é€šå‡½æ•°çš„thiså¹¶ä¸å¥½ç”¨å‘¢ï¼Œä¸‹é¢çš„ä¾‹å­å¯ä»¥è¯´æ˜ï¼š

    function Person() {
        this.a = 20;
        setInterval(function setA() {
            this.a++;
        }, 1000);
        console.log(this.a);
    }

    let p =new Person();

ç»“æœæ˜¯ï¼š

    20

æ ¹æ®ç»“æœèƒ½çœ‹å‡ºæ¥ï¼ŒPersonæ„é€ å‡½æ•°çš„å†…éƒ¨æœ‰ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œ1ç§’åa+1ï¼Œä½†æ˜¯é€šè¿‡æ‰“å°ç»“æœèƒ½çœ‹å‡ºï¼Œè¿™ä¸ªå‡½æ•°å¹¶æ²¡æœ‰ä½œç”¨äºPersonè¿™ä¸ªæ„é€ å‡½æ•°ä¸­çš„aå˜é‡ã€‚å› æ­¤å¦‚æœè¿™ç§æƒ…å†µæƒ³è¦æ”¹å˜Personä¸­çš„aå˜é‡ï¼Œåªèƒ½å¼•å…¥ä¸€ä¸ªå˜é‡æŒ‡å‘Personä¸­çš„thisï¼Œå¦‚ä¸‹ï¼š

    function Person() {
        this.a = 20;
        let that = this;
        setInterval(function setA() {
            that.a++;
            console.log(that.a);
        }, 1000);
        
    }

    let p =new Person();

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†thatæŒ‡å‘Personå‡½æ•°çš„thisï¼Œè¿™æ ·setAå‡½æ•°å°±èƒ½åˆ©ç”¨thatæ¥è®¿é—®Personå‡½æ•°ä¸­çš„aäº†ã€‚ä½†æ˜¯è¿™ç§å†™æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚ç®­å¤´å‡½æ•°çš„ä¸€äº›ç‰¹æ€§ï¼Œå°±æ˜¯ä¸ºäº†ç®€åŒ–æ™®é€šå‡½æ•°çš„thisçš„ä½¿ç”¨ï¼Œä»¥åŠç›¸å…³é¢å‘å¯¹è±¡çš„ä½¿ç”¨ï¼Œä½¿å‡½æ•°çœ‹èµ·æ¥ä¸é‚£ä¹ˆåƒé¢å‘å¯¹è±¡è¯­è¨€çš„å‡½æ•°ç”¨æ³•ã€‚

## ç®­å¤´å‡½æ•°

é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨ç®­å¤´è¡¨ç¤ºçš„å‡½æ•°ï¼Œå®ƒæ¯”æ™®é€šå‡½æ•°æ›´ç®€æ´ï¼Œå®ƒæ²¡æœ‰ç»‘å®šthisï¼Œargumentså’Œsuperã€‚ç”±äºå®ƒçš„ç‰¹æ€§ï¼Œå®ƒåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œä¸èƒ½ç”¨äºå®šä¹‰æ„é€ å‡½æ•°ã€‚

ä»¥ä¸‹æ˜¯ç®­å¤´å‡½æ•°çš„è¡¨è¾¾æ–¹å¼[1]ï¼š

    (param1, param2, â€¦, paramN) => { statements } 
    (param1, param2, â€¦, paramN) => expression => å½“åªéœ€è¦è¿”å›æ—¶ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·
    //ç›¸å½“äºï¼š(param1, param2, â€¦, paramN) =>{ return expression; }

    // å½“åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œåœ†æ‹¬å·æ˜¯å¯é€‰çš„ï¼š
    (singleParam) => { statements }
    singleParam => { statements }

    // æ²¡æœ‰å‚æ•°çš„å‡½æ•°åº”è¯¥å†™æˆä¸€å¯¹åœ†æ‹¬å·ã€‚
    () => { statements }

å½“ç„¶å®ƒè¿˜æœ‰å¾ˆå¤šé«˜çº§ç”¨æ³•ï¼š

    let test = params => {
        return {foo: "bar"}
    };

    //åŠ æ‹¬å·çš„å‡½æ•°ä½“è¿”å›å¯¹è±¡å­—é¢é‡è¡¨è¾¾å¼[1]
    let test2 = params => ({foo: "bar"}); ===ã€‹ä¸Šé¢çš„ç®€å†™ç‰ˆ
    console.log(test(1)); //{foo: "bar"}
    console.log(test(2)); //{foo: "bar"}

å¯¹äºå‚æ•°æ–¹é¢ï¼Œè™½ç„¶ç®­å¤´å‡½æ•°ç›¸å¯¹äºæ™®é€šå‡½æ•°æ²¡æœ‰argumentsï¼Œä½†æ˜¯ç®­å¤´å‡½æ•°æ”¯æŒå‰©ä½™å‚æ•°å’Œå‚æ•°é»˜è®¤å€¼ï¼Œå¦‚ä¸‹ï¼š


    let a = (item1, item2, ...items) => {
        console.log(item1, item2, items);
    }

    a(1, "a", 1, 2, "as", "c"); //æ‰“å°ç»“æœï¼š1 "a" (4)Â [1, 2, "as", "c"]
    
    let b = (item1, item2 = 2) => {
        console.log(item1, item2);
    }

    b(1); //æ‰“å°ç»“æœï¼š1 2
    b(1, 1); // æ‰“å°ç»“æœï¼š1 1

é¦–å…ˆé€šè¿‡ç¬¬ä¸€ä¸ªå‡½æ•°aèƒ½çœ‹å‡ºï¼Œæœ€åçš„itemsé€šè¿‡å±•å¼€è¿ç®—ç¬¦ï¼ˆ...ï¼‰æ¥æ”¶äº†é™¤äº†1å’Œ"a"ä¹‹å¤–çš„å‰©ä¸‹çš„æ‰€æœ‰å‚æ•°ã€‚è€Œbå‡½æ•°åˆ™å‘æˆ‘ä»¬å±•ç¤ºäº†å‚æ•°é»˜è®¤å€¼çš„ç”¨æ³•ï¼Œbå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œitem1å’Œitem2ï¼Œitem2æœ‰é»˜è®¤å€¼2ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨å®ƒï¼Œåªä¼ å…¥äº†ä¸€ä¸ªå‚æ•°ï¼Œåˆ™item1å¾—åˆ°ä¼ å…¥å€¼1ï¼Œitem2åˆ™ä¿æŒé»˜è®¤å€¼2ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œä¼ å…¥ä¸¤ä¸ª1ï¼Œåˆ™item2å°±ä¼šè¢«èµ‹äºˆæ–°å€¼ï¼Œä¸å†ä¿ç•™é»˜è®¤å€¼ã€‚ä½†æ˜¯æ³¨æ„ï¼Œå¸¦é»˜è®¤å€¼çš„å‚æ•°ï¼Œè¦æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åé¢ã€‚

æ¥ç€å¯ä»¥çœ‹ä¸‹ä¸‹é¢ä»£ç ï¼š

    let obj1 = {
        name: "name",
        func: () => {
            console.log("obj1:",this);
        }
    }

    let obj2 = {
        name: "name",
        func: function() {
            console.log("obj2:",this);
        }
    }

    obj1.func();
    obj2.func();

è¿è¡Œç»“æœæ˜¯ï¼š

    obj1: WindowÂ {parent: Window, opener: null, top: Window, length: 0, frames: Window,Â â€¦}
    bj2: {name: "name", func: Æ’}

æ˜¾è€Œæ˜“è§ï¼Œobj1å†…å®ç°ç®­å¤´å‡½æ•°ï¼ŒthisæŒ‡å‘Windowï¼Œè€Œæ™®é€šå‡½æ•°çš„thisæŒ‡å‘äº†obj2è¿™ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥ï¼Œç®­å¤´å‡½æ•°çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š

    function outer() {
        this.i = 2;

        function inner() {
            console.log("this:",this,"i:",this.i);
        }
        inner();
    }

    var outer = new outer();

    function outer2() {
        this.i = 2;

        let inner = () => {
            console.log("this:",this,"i:",this.i);
        }
        inner();
    }

   var outer2 = new outer2();

ç»“æœæ˜¯ï¼š

    this: WindowÂ {parent: Window, opener: null, top: Window, length: 0, frames: Window,Â â€¦} i: undefined
    this: outer2Â {i: 2} i: 2

æ˜¾è€Œæ˜“è§ï¼ŒåŒæ ·æ˜¯å¤–éƒ¨å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°ï¼Œè°ƒç”¨äº†åä¸ºinnerçš„å†…éƒ¨å‡½æ•°ï¼Œä½†æ˜¯thisçš„æŒ‡å‘ç»“æœå´ä¸åŒï¼Œå¦‚æœå†…éƒ¨å‡½æ•°æ˜¯æ™®é€šå‡½æ•°ï¼Œåˆ™thisæŒ‡å‘å…¨å±€ï¼Œä¹Ÿå°±æ˜¯Windowï¼Œæ‰€ä»¥ï¼Œç¬¬ä¸€ä¸ªthisæŒ‡å‘Windowã€‚è€Œç®­å¤´å‡½æ•°æ²¡æœ‰thisï¼Œå®ƒçš„thisç»§æ‰¿è‡ªä¸Šä¸€å±‚ï¼Œä¸Šä¸€å±‚æ˜¯outer2çš„å®ä¾‹ï¼ŒthisæŒ‡å‘outer2ï¼Œå› æ­¤ç®­å¤´å‡½æ•°çš„thisä¹ŸæŒ‡å‘outer2ã€‚å› æ­¤ç¬¬ä¸€ä¸ªiçš„å€¼æ˜¯undefinedï¼Œç¬¬äºŒä¸ªæ˜¯è·å–åˆ°outer2ä¸­çš„içš„å€¼ï¼Œä¹Ÿå°±æ˜¯2.

å¦‚æœå†…éƒ¨å‡½æ•°ä¸ºæ™®é€šå‡½æ•°ï¼Œä¹Ÿéœ€è¦å¾—åˆ°å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸‹æ–¹ä»£ç å®ç°ï¼š

    function outer() {
        this.i = 2;
        this.inner = function () {
            console.log("this:",this,"i:",this.i);
        }
        this.inner();
    }

    var outer = new outer();

æˆ–è€…ï¼š

    function outer() {
        this.i = 2;
        let that = this;
        var inner = function () {
            console.log("this:",that,"i:",that.i);
        }
        inner();
    }

    var outer = new outer();

ç»“æœéƒ½æ˜¯ï¼š

    this: outerÂ {i: 2} i: 2

## ç»“è¯­

ç®­å¤´å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œç†è§£å·®ä¸å¤šå°±è¿™ä¹ˆå¤šäº†ï¼Œæ€»ä¹‹ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰thisï¼Œæ‰€ä»¥å¯¹è±¡ç›¸å…³çš„ä¸€åˆ‡ç”¨æ³•ï¼Œæ¯”å¦‚newï¼Œprototypeç­‰ï¼Œç®­å¤´å‡½æ•°éƒ½æ²¡æœ‰ã€‚åœ¨æŸäº›åœºåˆï¼Œç®­å¤´å‡½æ•°ç¡®å®ç®€åŒ–äº†ä¹¦å†™ï¼Œæˆ–è€…ç”±äºç®­å¤´å‡½æ•°thisç»§æ‰¿è‡ªä¸Šå±‚ï¼Œå› æ­¤åœ¨æŸäº›æƒ…å†µç®­å¤´å‡½æ•°ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼Œä½†æ˜¯åªè¦ç”¨åˆ°å’Œå¯¹è±¡ç›¸å…³çš„æ–¹æ³•æˆ–è€…å…³é”®å­—ç­‰ï¼Œå‡ä¸èƒ½ç”¨ç®­å¤´å‡½æ•°ã€‚

## å‚è€ƒé“¾æ¥
[1] https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions